/*
 * Shorten, a jQuery plugin to automatically shorten text to fit in a block or a pre-set width and configure how the text ends.
 * Copyright (C) 2009-2010  Marc Diethelm
 * License: (GPL 3, http://www.gnu.org/licenses/gpl-3.0.txt) see license.txt
 */

(function(a){a.a.b=function(){var b={},c=arguments,d=c.callee;if(c.length)if(c[0].constructor==Object)b=c[0];else if(c[0]=="options")return a(this).n(0).data("options-truncate");else b={width:parseInt(c[0]),e:c[1]};this.c("visibility","hidden");var g=a.extend({},d.h,b);return this.m(function(){var f=a(this);f.data("options-truncate",g);if(g.e=="..."&&d.f){this.style[d.f]="ellipsis";f.c("visibility","visible");return true}var l=g.width||f.parent().width(),e=f.text(),o=e.length,h,i,m=a("<span/>").d(g.e).text(); if(d.g){h=d.j.call(this);i=d.i}else{h=d.k.call(this);i=d.l}if(i.call(this,e,h)<l){f.text(e);this.style.visibility="visible";return true}m=i.call(this,m,h);l-=m;do{o--;e=e.substring(0,o)}while(i.call(this,e,h)>=l);f.d(a.p(a("<span/>").text(e).d())+g.e);this.style.visibility="visible";return true})};var j=document.documentElement.style,n=false;if("textOverflow"in j)n="textOverflow";else if("OTextOverflow"in j)n="OTextOverflow";else{j=document.createElement("canvas");var k=j.getContext("2d");a.a.b.g= k?true:false;delete j}a.a.b.f=n;a.a.b.j=function(){var b=a(this),c=document.createElement("canvas");k=c.getContext("2d");b.d(c);k.font=Math.ceil(parseFloat(b.c("font-size")))+"px "+b.c("font-family")+" "+b.c("font-weight")+" "+b.c("font-style");return k};a.a.b.i=function(b,c){return c.measureText(b).width};a.a.b.k=function(){var b=a('<table style="padding:0; margin:0; border:none; font:inherit;width:auto;zoom:1;position:absolute;"><tr style="padding:0; margin:0; border:none; font:inherit;"><td style="padding:0; margin:0; border:none; font:inherit;white-space:nowrap;"></td></tr></table>'); $td=a("td",b);a(this).d(b);return $td};a.a.b.l=function(b,c){c.text(b);return c.width()};a.a.b.h={e:"&hellip;",o:true}})(jQuery);
