

/**
 * Notes to M. David Green about original version:
 *
 * If the selector matches multiple objects the plugin fails:
 * All items end up with the same text and content-length, regardless of
 * styling.
 * Solution: Don't use var 'that' in the each loop. Use 'this' to manipulate the
 * current item.
 *
 * Measuring the text width in a table appended to body doesn't work.
 * You need to measure the text in the style context where it is to be
 * displayed. In order for this to work the table elements need to inherit the
 * surrounding text style. (eg: Measuring text that is bold in the original
 * context but non-bold outside will result in text that is too long.)
 *
 * Tips:
 * Don't redeclare vars passed as arguments.
 * Use {border: none;} not {border: 0;}.
 *
 * Also changed the configuration of the plugin:
 * It still allows using width and margin string as arguments, but it can now
 * also be configured using a hash (an object). It is now possible to predefine
 * defaults for all subsequent calls to the plugin (with
 * $.fn.textTruncate.defaults). It's also possible to get the current plugin
 * options used for any 'truncated' element. (Only the options for the first
 * matched element are returned.)
 *
 * I added a new option 'tooltip', boolean: Only display tooltip if true.
 **/

/**
 * DEV NOTES:
 * ==========
 *
 *
 * BUGS:
 * - FIXED: Escaped HTML in the text causes problems: 1) text() bug; 2) width is wrong;
 *
 * NEED:
 * - DONE: Test chainability
 * - DONE: Use CSS3 text-overflow:ellipsis if possible (IE7-, Safari and Konqueror. Opera needs -o-text-overflow.)
 * - handle overflow:visible if set and white-space:no-wrap if not set in CSS?
 * - need to check for values like &hellip; not just "..." in the user options, to use native CSS.
 *
 * WANT:
 * - DONE: zero configuration: get width from parent (width and max-Width)
 * - option marquee instead of truncate?
 * - add a test: does the text need to be truncated?
 * - save a value in .data(): "is_truncated"?
 * - handle dynamic/resized widths. store original text in .data()
 * - plugin name: jQuery Overflow, better?
 **/

 // keywords: jquery, plugin, truncate, overflow, text-overflow, marquee